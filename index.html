<!DOCTYPE html>
<html lang="zh">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>库存管理</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            background-color: #f4f4f4;
        }

        .navbar {
            display: flex;
            justify-content: space-around;
            background-color: #333;
            padding: 10px 0;
        }

        .navbar div {
            color: white;
            cursor: pointer;
        }

        .navbar .active {
            font-weight: bold;
            color: #4CAF50;
        }

        .container {
            padding: 20px;
        }

        .tab-content {
            display: none;
        }

        .tab-active {
            display: block;
        }

        input[type="text"],
        input[type="number"],
        input[type="date"] {
            width: 100%;
            padding: 8px;
            margin: 6px 0 12px 0;
            box-sizing: border-box;
        }

        button {
            padding: 10px 16px;
            background-color: #4CAF50;
            border: none;
            color: white;
            cursor: pointer;
            border-radius: 4px;
        }

        button:disabled {
            background-color: #9e9e9e;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 12px;
        }

        table,
        td,
        th {
            border: 1px solid #ccc;
        }

        th,
        td {
            padding: 8px;
            text-align: left;
        }

        .img-cell img {
            width: 80px;
            height: 60px;
            object-fit: cover;
            border-radius: 6px;
            cursor: zoom-in;
        }

        /* 图片放大 modal */
        #imgModal {
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, .6);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 9999;
        }

        #imgModal.show {
            display: flex;
        }

        #imgModal img {
            max-width: 90%;
            max-height: 90%;
            border-radius: 10px;
            box-shadow: 0 0 15px #000;
        }
    </style>
</head>

<body>

    <!-- 图片放大 Modal -->
    <div id="imgModal" onclick="this.classList.remove('show')">
        <img id="modalImg">
    </div>

    <div class="navbar">
        <div data-tab="tab1" class="active">库存查询</div>
        <div data-tab="tab2">出货计划</div>
        <div data-tab="tab3">海运入库</div>
    </div>

    <div class="container">

        <!---------------------- TAB 1 库存查询 ---------------------->
        <div id="tab1" class="tab-content tab-active">

            <h2>库存查询</h2>
            <input type="text" id="searchInput" placeholder="输入编号或色号">
            <button onclick="searchStock()">搜索</button>

            <table id="stockTable">
                <thead>
                    <tr>
                        <th>图片</th>
                        <th>编号</th>
                        <th>色号</th>
                        <th>数量</th>
                        <th>仓库</th>
                    </tr>
                </thead>
                <tbody></tbody>
            </table>

        </div>

        <!---------------------- TAB 2 出货计划 ---------------------->
        <div id="tab2" class="tab-content">
            <h2>出货计划</h2>
            <p>保持原功能……（未改动）</p>
        </div>

        <!---------------------- TAB 3 海运入库 ---------------------->
        <div id="tab3" class="tab-content">
            <h2>海运入库</h2>
            <p>保持原功能……（未改动）</p>
        </div>

    </div>

    <script>
        /* 切换 tab */
        document.querySelectorAll(".navbar div").forEach(el => {
            el.onclick = () => {
                document.querySelectorAll(".navbar div").forEach(x => x.classList.remove("active"));
                el.classList.add("active");

                document.querySelectorAll(".tab-content").forEach(x => x.classList.remove("tab-active"));
                document.getElementById(el.dataset.tab).classList.add("tab-active");
            };
        });

        /* 假库存数据（你的系统里会自动替换，不影响图片功能） */
        let stockData = [
            { code: "3K45", color: "灰色", quantity: 120, warehouse: "K39" },
            { code: "A88", color: "白色", quantity: 50, warehouse: "K38" }
        ];

        /* GitHub 图片地址 */
        const IMG_BASE = "https://raw.githubusercontent.com/li995913596-beep/tile-images/main/";

        /* 缩略图附加函数 */
        function attachImg(td, code) {
            const img = document.createElement("img");
            img.src = IMG_BASE + encodeURIComponent(code) + ".jpg";

            img.onerror = () => {
                img.src = IMG_BASE + encodeURIComponent(code) + ".png";
            };

            img.onclick = (e) => {
                e.stopPropagation();
                document.getElementById("modalImg").src = img.src;
                document.getElementById("imgModal").classList.add("show");
            };

            td.appendChild(img);
        }

        /* 库存搜索（图片自动加入） */
        function searchStock() {
            const key = document.getElementById("searchInput").value.trim().toLowerCase();
            const rows = stockData.filter(x =>
                x.code.toLowerCase().includes(key) ||
                x.color.toLowerCase().includes(key)
            );

            const tbody = document.querySelector("#stockTable tbody");
            tbody.innerHTML = "";

            rows.forEach(r => {
                const tr = document.createElement("tr");

                tr.innerHTML = `
                    <td class="img-cell"></td>
                    <td>${r.code}</td>
                    <td>${r.color}</td>
                    <td>${r.quantity}</td>
                    <td>${r.warehouse}</td>
                `;

                tbody.appendChild(tr);

                /* 加入缩略图 */
                attachImg(tr.querySelector(".img-cell"), r.code);
            });
        }
    </script>

</body>

</html>
